{"version":3,"file":"hot/hot-update.js","mappings":"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","sources":["webpack://kore-web-sdk/./src/components/chatwindow/chatWindow.ts","webpack://kore-web-sdk/webpack/runtime/getFullHash"],"sourcesContent":["import * as j$ from '../../libs/korejquery';\nimport requireKr from '../base-sdk/kore-bot-sdk-client';\nimport TemplateManager from '../../templatemanager/templateManager';\nimport KoreHelpers from '../../utils/helpers';\nimport EventEmitter from '../../utils/EventEmiter'\nimport MessageTemplate from '../../templatemanager/templates/messageTemplate/messageTemplate';\nimport KRPerfectScrollbar from 'perfect-scrollbar';\nimport './../../libs/perfectscroll/css/perfect-scrollbar.min.css';\nimport './sass/chatWindow.scss';\n//import './../../libs/emojione.sprites.css';\nimport chatConfig from './config/kore-config'\n//import GreeetingsPlugin from '../../plugins/greetings/greetings-plugin'\n\nconst bot = requireKr('/KoreBot.js').instance();\n\ndeclare const document:any;\nconst $:any = j$.default ;\ndeclare const callListener:any;\n\n\ndeclare const window:any;\n\n\n/**\n * ChatWindow class\n *\n * @decorator Class\n */\nclass chatWindow extends EventEmitter{\n chatEle: any;\n  config: {};\n\n\n   /**\n     * @eventProperty\n     */\n    testEvent:any;\n\n /**\n     * @event\n */\n  EVENTS={\n    /**\n     * jwtSuccess will be triggered once the jwt token received from API.\n     *\n     * @event chatWindow#jwtSuccess\n     * @type {Object}\n     * @property {String} jwt - jwt token from server response .\n     */\n    JWT_SUCCESS:'jwtSuccess',\n    /**\n     * beforeViewInit will be triggered before the chat window dom element is attached to provided container.\n     *\n     * @event chatWindow#beforeViewInit\n     * @type {object}\n     * @property {Object} chatEle - chat window dom element .\n     * @property {Object} chatWindowEvent\n     */\n    BEFORE_VIEW_INIT:'beforeViewInit',\n    /**\n     * viewInit will be triggered once the chat window dom element is attached to provided container.\n     *\n     * @event chatWindow#viewInit\n     * @type {object}\n     * @property {Object} chatEle - chat window dom element .\n     * @property {Object} chatWindowEvent\n     */\n    VIEW_INIT:'viewInit',\n    /**\n     * beforeRenderMessage will be triggered before appending the message html to chatwindow\n     *\n     * @event chatWindow#beforeRenderMessage\n     * @type {object}\n     * @property {Object} messageHtml message bubble html content\n     * @property {Object} msgData message data\n     * @property {Object} chatWindowEvent\n    */\n    BEFORE_RENDER_MSG:'beforeRenderMessage',\n     /**\n     * afterRenderMessage will be triggered after appending the message html to chatwindow\n     *\n     * @event chatWindow#afterRenderMessage\n     * @type {object}\n     * @property {Object} messageHtml message bubble html content\n     * @property {Object} msgData message data\n     * @property {Object} chatWindowEvent\n     */\n    AFTER_RENDER_MSG:'afterRenderMessage',\n    /**\n     * onWSOpen will be triggered on new websocket connection open\n     *\n     * @event chatWindow#onWSOpen\n     */\n    ON_WS_OPEN:'onWSOpen',\n     /**\n     * onWSMessage will be triggered on new message received from websocket\n     *\n     * @event chatWindow#onWSMessage\n     * @type {object}\n     * @property {Object} messageData - message data received from websocket\n     * @property {Object} chatWindowEvent\n     */\n    ON_WS_MESSAGE:'onWSMessage',\n    /**\n     * onWSMessage will be triggered on new message received from websocket\n     *\n     * @event chatWindow#beforeWSSendMessage\n     * @type {object}\n     * @property {Object} messageToBot - message data to be sent to to websocket\n     * @property {Object} chatWindowEvent\n     */\n     BEFORE_WS_SEND_MESSAGE:'beforeWSSendMessage',\n     /**\n     * onChatHistoryResponse will be triggered on chatHistory API response\n     *\n     * @event chatWindow#onChatHistoryResponse\n     * @type {object}\n     * @property {Object} historyResponse - chatHistory API response\n     * @property {Object} chatWindowEvent\n     */\n      ON_CHAT_HISTORY_RESPONSE:'onChatHistoryResponse',\n     /**\n     * onKeyDownEvent will be triggered on Keydown Event\n     *\n     * @event chatWindow#onKeyDownEvent\n     * @type {object}\n     * @property {Object} keyDownEvent \n     * @property {Object} chatWindowEvent\n     */\n      ON_KEY_DOWN: 'onKeyDown',\n      /**\n     * jwtGrantSuccess will be triggered on jwt grant success API response\n     *\n     * @event chatWindow#jwtGrantSuccess\n     * @type {object}\n     * @property {Object} jwtGrantSuccess -  jwt grant success API response\n     * @property {Object} chatWindowEvent\n     */\n       JWT_GRANT_SUCCESS : 'jwtGrantSuccess'\n  }\n  \n constructor(){\n  super(null);\n  this.chatEle;\n  this.config={};\n  this.init(this.config);\n}\npaginatedScrollMsgDiv: any = $('<div class=\"temp-message-div\"><ul class=\"prev-message-list\"></ul></div>');\ninit  (config:any) {\n  const me:any = this;\n  me.config=me.extend(me.config,chatConfig);\n  me.plugins = {};\n  me.bot=bot;\n  me.vars={};\n  me.helpers=KoreHelpers.helpers;\n  me.templateManager = new TemplateManager(me);\n  me.messageTemplate=new MessageTemplate();\n  me.messageTemplate.hostInstance=me;\n  me.installCallbackForPlugins();\n  me.installDefaultPlugins();\n}\n\ninstallDefaultPlugins(){\n  const me:any = this;\n  //me.installPlugin(new GreeetingsPlugin());\n}\n\ninstallCallbackForPlugins (){\n  const me:any = this;\n  Object.keys(me.plugins).forEach(function(pluginName){\n    if(me.plugins[pluginName].onHostCreate) { \n      me.plugins[pluginName].onHostCreate();\n    }\n  });\n}\n\n\nshow  (config:any) {\n  const me:any = this;\n  if (config.widgetSDKInstace) {\n    this.addWidgetEvents(config);\n  }\n  me.initShow(config);\n  if ($('body').find('.kore-chat-window').length > 0) {\n      return false;\n  }\n \n};\ninitShow  (config:any) {\n  const me:any = this;\n  me.config=me.extend(chatConfig,config);\n  this.config = me.extend(me.config,{\n    chatTitle: 'Kore.ai Bot Chat',\n    allowIframe: false,\n    botOptions: me.config.botOptions,\n  });\n  me.messagesQueue=[];\n\n  me.config.chatTitle = 'Kore.ai Bot Chat';\n  me.config.allowIframe = false;\n\n  me.reWriteWebHookURL(me.config);\n  window._chatHistoryLoaded = false;\n  me.JWTSetup();\n  me.initi18n();\n  me.seti18n((me.config && me.config.i18n && me.config.i18n.defaultLanguage) || 'en');\n  me.config.botOptions.botInfo.name = me.config.botOptions.botInfo.name.escapeHTML();\n  me._botInfo = me.config.botOptions.botInfo;\n  me.config.botOptions.botInfo = {\n    chatBot: me._botInfo.name, taskBotId: me._botInfo._id, customData: me._botInfo.customData, metaTags: me._botInfo.metaTags, tenanturl: me._botInfo.tenanturl,\n  };\n  const tempTitle = me._botInfo.name;\n  me.config.chatTitle = me.config.botMessages.connecting;\n  if (me.config.multiPageApp && me.config.multiPageApp.enable) {\n    var cwState = me.getLocalStoreItem('kr-cw-state');\n    var maintainContext:any = !!cwState;\n    if (maintainContext && me.getLocalStoreItem('kr-cw-uid')) {\n      me.config.botOptions.userIdentity = me.getLocalStoreItem('kr-cw-uid');\n    }\n    me.config.botOptions.maintainContext = maintainContext;\n  }\n  me.config.userAgentIE = navigator.userAgent.indexOf('Trident/') !== -1;\n  const mobileBrowserOpened = me.isMobile();\n  if (mobileBrowserOpened) {\n    me.config.isSendButton = true;\n  }\n  me.config.ttsInterface = me.config.ttsInterface || 'webapi';\n  me.loadHistory = me.config.loadHistory || false;\n  me.historyLoading = !!me.loadHistory;\n  me.config.botOptions.loadHistory = me.config.loadHistory;\n  me.config.botOptions.chatHistory = me.config.chatHistory;\n  me.config.botOptions.handleError = me.config.handleError;\n  me.config.botOptions.googleMapsAPIKey = me.config.googleMapsAPIKey;\n \n  const chatWindowHtml = (<any> $(me.getChatTemplate())).tmpl(me.config);\n  me.chatEle = chatWindowHtml;\n  me.updatei18nDirection();\n\n  me.config.chatTitle = tempTitle;\n  if (!me.config.minimizeMode) {\n    me.bot.init(me.config.botOptions, me.config.messageHistoryLimit);\n    // me.config.botOptions.callback(null, me.config.botOptions);\n    if (me.config.multiPageApp && me.config.multiPageApp.enable) {\n      me.setLocalStoreItem('kr-cw-state', 'open');\n      me.setLocalStoreItem('kr-cw-uid', me.config.botOptions.userIdentity);\n      setTimeout(() => {\n        if (cwState === 'minimized') {\n          $('.kore-chat-window button.minimize-btn').trigger('click');\n        }\n      }, 500);\n    }\n  } else {\n    chatWindowHtml.addClass('minimize');\n    chatWindowHtml.find('.minimized-title').html(`Talk to ${me.config.chatTitle}`);\n    me.skipedInit = true;\n    if (me.config.multiPageApp && me.config.multiPageApp.enable && maintainContext) {\n      setTimeout(() => {\n        if (cwState === 'open') {\n          $('.kore-chat-window .minimized .messages').trigger('click');\n        } else if (cwState === 'minimized') {\n          $('.kore-chat-window .minimized .messages').trigger('click');\n          $('.kore-chat-window button.minimize-btn').trigger('click');\n        }\n      }, 500);\n    }\n  }\n  if (me.config.allowLocation) {\n    me.bot.fetchUserLocation();\n  }\n  me.render(chatWindowHtml);\n  me.unfreezeUIOnHistoryLoadingFail.call(me);\n  me.updateOnlineStatus();\n  me.addBottomSlider();\n  window.addEventListener('online', me.updateOnlineStatus);\n  window.addEventListener('offline', me.updateOnlineStatus);\n  me.attachEventListener();\n  // me.show();\n};\n\nfindSortedIndex  (array:any, value:any) {\n  let low = 0;\n  let high = array.length;\n\n  while (low < high) {\n    const mid = (low + high) >>> 1;\n    if (array[mid] < value) low = mid + 1;\n    else high = mid;\n  }\n  return low;\n};\n\nextend(target:any, source:any) {\n  let me:any=this;\n  for (var prop in source) {\n      if (source.hasOwnProperty(prop)) {\n          if (target[prop] && typeof source[prop] === 'object') {\n              me.extend(target[prop], source[prop]);\n          }\n          else {\n              target[prop] = source[prop];\n          }\n      }\n  }\n  return target;\n}\n\n// converts v1 webhooks url to v2 automatically\nreWriteWebHookURL  (chatConfig:any) {\n  if (chatConfig.botOptions && chatConfig.botOptions.webhookConfig && chatConfig.botOptions.webhookConfig.apiVersion && chatConfig.botOptions.webhookConfig.apiVersion === 2) {\n    if (chatConfig.botOptions && chatConfig.botOptions.webhookConfig && chatConfig.botOptions.webhookConfig.webhookURL) {\n      chatConfig.botOptions.webhookConfig.webhookURL = chatConfig.botOptions.webhookConfig.webhookURL.replace('hooks', 'v2/webhook');\n    }\n  }\n};\n// iframe of child window events //\nattachEventListener (iframe:any, postPayload:any) {\n    // Create IE + others compatible event handler\n    let me:any=this;\n    var eventMethod = window.addEventListener ? \"addEventListener\" : \"attachEvent\";\n    var eventer = window[eventMethod];\n    var messageEvent = eventMethod == \"attachEvent\" ? \"onmessage\" : \"message\";\n    // Listen to message from child window\n    eventer(messageEvent, function (e:any) {\n        if (e.data && e.data.event) {\n            var data = e.data;\n            switch (data.event) {\n                case 'formEvent':\n                    me.formAction(e.data);\n                    break;\n                default:\n                    break;\n            }\n        }\n    }, false);\n}\npostMessageToChildIframes (iframe: any,postPayload: any) {\n  if(iframe && iframe.length && iframe[0] && iframe[0].contentWindow && postPayload){\n      iframe[0].contentWindow.postMessage(\n          postPayload, '*'\n    );\n  }\n};\n// iframe of child window events ends//\n\n// inline model for iframes starts here//\nopenModal(template:any, showClose:any) {\n  let me:any=this;\n  const chatBodyModal = $('#chatBodyModal');\n  const close = (<any> document).getElementsByClassName('closeChatBodyModal')[0];\n  close.onclick = function () {\n    $('.kore-chat-window').removeClass('modelOpen');\n    const postPayload = {\n      payload: {},\n      event: 'formEvent', // need to find another way to make it common ,giving a static value due to time constrain //\n      action: 'formCancel',\n      metaData: {},\n    };\n    const iframe = chatBodyModal.find('iframe');\n    me.postMessageToChildIframes(iframe, postPayload);\n    chatBodyModal.hide();\n    $('.kore-chat-window').removeClass('modelOpen');\n  };\n  if (template) {\n    chatBodyModal.find('.closeChatBodyModal').css('display', 'none');\n    chatBodyModal.find('.loading_form').css('z-index', 999);\n    if (chatBodyModal && chatBodyModal.length) {\n      chatBodyModal.find('#chatBodyModalContent').empty();\n      chatBodyModal.find('#chatBodyModalContent').append(template);\n      chatBodyModal.show();\n      $('.kore-chat-window').addClass('modelOpen');\n    }\n    setTimeout(() => {\n      chatBodyModal.find('.loading_form').css('z-index', 0);\n      if (showClose) {\n        chatBodyModal.find('.closeChatBodyModal').css('display', 'block');\n      } else {\n        chatBodyModal.find('.closeChatBodyModal').css('display', 'none');\n      }\n    }, 1500);\n  } else {\n    $('.kore-chat-window').removeClass('modelOpen');\n    chatBodyModal.find('.closeChatBodyModal').css('display', 'none');\n    setTimeout(() => {\n      chatBodyModal.find('#chatBodyModalContent').empty();\n    }, 1000);\n    chatBodyModal.hide();\n    $('.kore-chat-window').removeClass('modelOpen');\n  }\n}\n// inline model for iframes starts ends//\n\n// form event actions starts here //\nformAction(event:any) {\n  let me:any=this;\n  if (event && event.action === 'formSubmit') {\n    me.openModal();\n    if ($('.kore-chat-body .uiformComponent').length) {\n      $('.kore-chat-body .uiformComponent').closest('.inlineIframeContainer').css('display', 'none');\n    }\n  } else if (event.action === 'formCancel') {\n    if ($('.kore-chat-body .uiformComponent').length) {\n      $('.kore-chat-body .uiformComponent').closest('.inlineIframeContainer').css('display', 'none');\n    }\n  } else if (event.action === 'formClose') {\n    me.openModal();\n    if ($('.kore-chat-body .uiformComponent').length) {\n      $('.kore-chat-body .uiformComponent').closest('.inlineIframeContainer').css('display', 'none');\n    }\n  }\n}\nrenderWebForm  (msgData:any, returnTemplate:any) {\n  const me:any = this;\n  if (msgData.message && msgData.message[0].component && msgData.message[0].component.payload && msgData.message[0].component.payload.formData) {\n    msgData.renderType = msgData.message[0].component.payload.formData.renderType;\n    msgData.message[0].component.payload.template_type = 'iframe';\n    if (!returnTemplate && msgData.renderType === 'inline') {\n      this.renderMessage(msgData);\n    } else {\n      // const popupHtml = $(this.getChatTemplate('iframe')).tmpl({\n      //   msgData,\n      //   helpers: me.helpers,\n      //   link_url: msgData.message[0].component.payload.formData.formLink,\n      // });\n      const popupHtml =  me.templateManager.renderMessage(msgData)\n      if (returnTemplate) {\n        return popupHtml;\n      }\n      me.openModal(popupHtml[0], true);\n    }\n  }\n};\n// form event actions ends here //\naddBottomSlider  () {\n  $('.kore-chat-window').remove('.kore-action-sheet');\n  const actionSheetTemplate = '<div class=\"kore-action-sheet hide\">\\\n <div class=\"actionSheetContainer\"></div>\\\n </div>';\n  $('.kore-chat-window').append(actionSheetTemplate);\n};\nupdateOnlineStatus () {\n  let me:any=this;\n  if (typeof (navigator.onLine) === 'boolean') {\n    if (navigator.onLine) {\n      me.hideError();\n      if (bot && bot.RtmClient) {\n        bot.getHistory({ forHistorySync: true, limit: 30 });\n      }\n    } else {\n      me.showError('You are currently offline');\n    }\n  }\n};\n\nresetPingMessage  () {\n  const me:any = this;\n  clearTimeout(me.config.pingPong.timer);\n  me.config.pingPong.timer = setTimeout(() => {\n    const messageToBot:any = {};\n    messageToBot.type = 'ping';\n    me.bot.sendMessage(messageToBot, () => {\n\n    });\n    me.resetPingMessage();\n  }, me.config.pingPong.interval);\n};\n\nhandleImagePreview  () {\n  const modal = document.getElementById('myModal');\n\n  // Get the image and insert it inside the modal - use its \"alt\" text as a caption\n  //const img = document.getElementById('myImg');\n  const modalImg = document.getElementById('img01');\n  const captionText = document.getElementById('caption');\n  if (document.querySelectorAll('.messageBubble img').length > 0) {\n    for (let i = 0; i < document.querySelectorAll('.messageBubble img').length; i++) {\n      const evt = document.querySelectorAll('.messageBubble img')[i];\n      evt.addEventListener('click',  (e:any) => {\n        e.stopPropagation();\n        e.stopImmediatePropagation();\n        modal.style.display = 'block';\n        modalImg.src = $(e.currentTarget).attr('src');\n        captionText.innerHTML = $(e.currentTarget).attr('alt');\n      });\n    }\n  }\n\n  /* img.onclick = function(){\n         modal.style.display = \"block\";\n         modalImg.src = this.src;\n         captionText.innerHTML = this.alt;\n     } */\n\n  // Get the <span> element that closes the modal\n  const span = document.getElementsByClassName('closeImagePreview')[0];\n\n  // When the user clicks on <span> (x), close the modal\n  span.onclick = function () {\n    modal.style.display = 'none';\n  };\n};\nisMobile () {\n  try {\n    const isMobile = (/iphone|ipod|android|blackberry|fennec/).test(navigator.userAgent.toLowerCase()) || window.screen.width <= 480;\n    return isMobile;\n  } catch (e) {\n    return false;\n  }\n};\nonWindowResize (event:any) {\n  let me:any=this;\n    $('.chat-container').scrollTop($('.chat-container')[0].scrollHeight);\n    if (me.chatPSObj && me.chatPSObj.update) {\n      me.chatPSObj.update();\n    }\n};\nsetLocalStoreItem  (key:any, value:any) {\n  const me:any = this;\n  const storage = me.getStoreTypeByKey(key);\n  return window[storage].setItem(key, value);\n};\ngetLocalStoreItem  (key:any) {\n  const me:any = this;\n  const storage = me.getStoreTypeByKey(key);\n  return window[storage].getItem(key);\n};\nremoveLocalStoreItem (key:any) {\n  const me:any = this;\n  const storage = me.getStoreTypeByKey(key);\n  return window[storage].removeItem(key);\n};\ngetStoreTypeByKey (key:any) {\n  const me:any = this;\n  let storage = 'localStorage';\n  if (key === 'kr-cw-uid') {\n    storage = me.config.multiPageApp.chatWindowStateStore;\n  } else if (key === 'kr-cw-uid') {\n    storage = me.config.multiPageApp.userIdentityStore;\n  }\n  return storage;\n};\n\niniti18n  () {\n  const me:any = this;\n  me.i18n = {\n    selectedLanguage: 'en',\n    rtlLanguages: [], // loads from i18n config\n    langFiles: {\n      en: {\n        message: 'Message...',\n        connecting: 'Connecting...',\n        reconnecting: 'Reconnecting...',\n        entertosend: 'Press enter to send',\n        endofchat: 'End of chat history',\n        loadinghistory: 'Loading chat history..',\n        sendText: 'Send',\n        closeText: 'Close',\n        expandText: 'Expand',\n        minimizeText: 'Minimize',\n        reconnectText: 'Reconnect',\n        attachmentText: 'Attachment',\n      },\n    },\n  };\n  if (me.plugins.Korei18nPlugin) {\n    me.config.i18n = me.plugins.Korei18nPlugin.config;\n  }\n  if (me.config && me.config.i18n && me.config.i18n.languageStrings) {\n    me.i18n.langFiles = me.extend(me.i18n.langFiles, me.config.i18n.languageStrings);\n  }\n  if (me.config && me.config.i18n && me.config.i18n.rtlLanguages) {\n    me.i18n.rtlLanguages = me.extend(me.i18n.rtlLanguages, me.config.i18n.rtlLanguages);\n  }\n};\nseti18n (lang:any) {\n  const me:any = this;\n  let botMessages;\n  me.i18n.selectedLanguage = lang;\n  botMessages=me.config.botMessages  = me.i18n.langFiles[me.i18n.selectedLanguage];\n  botMessages.availableLanguages = (me.config.i18n && me.config.i18n.availableLanguages) || false;\n  botMessages.selectedLanguage = me.i18n.selectedLanguage;\n\n  if (me.chatEle) {\n    const chatEle = me.chatEle;\n    chatEle.find('.endChatContainerText').html(botMessages.endofchat);\n\n    chatEle.find('.close-btn').attr('title', botMessages.closeText);\n    chatEle.find('.expand-btn').attr('title', botMessages.expandText);\n    chatEle.find('.minimize-btn').attr('title', botMessages.minimizeText);\n    chatEle.find('.reload-btn').attr('title', botMessages.reconnectText);\n    chatEle.find('.sdkAttachment.attachmentBtn').attr('title', botMessages.attachmentText);\n\n    chatEle.find('.chatInputBox').attr('placeholder', botMessages.message);\n    chatEle.find('.sendButton').html(botMessages.sendText);\n    chatEle.find('.chatSendMsg').html(botMessages.entertosend);\n  }\n};\nupdatei18nDirection () {\n  const me:any = this;\n  if (me.i18n.rtlLanguages.indexOf(me.i18n.selectedLanguage) > -1) {\n    me.chatEle.attr('dir', 'rtl');\n  } else {\n    me.chatEle.attr('dir', 'ltr');\n  }\n};\ndestroy  () {\n  const me:any = this;\n  $('.kore-chat-overlay').hide();\n  me.bot.close();\n  if (!me.config.minimizeMode) {\n    me.bot.destroy();\n  }\n  me.messagesQueue = [];\n  if (me.config && me.chatEle) {\n    if (!me.config.minimizeMode) {\n      me.chatEle.remove();\n    } else {\n      me.chatEle.find('.kore-chat-header .header-title').html(me.config.botMessages.reconnecting);\n      me.chatEle.addClass('minimize');\n      me.skipedInit = true;\n    }\n  }\n  window.removeEventListener('online', me.updateOnlineStatus);\n  window.removeEventListener('offline', me.updateOnlineStatus);\n};\n\nresetWindow () {\n  const me:any = this;\n  me.chatEle.find('.kore-chat-header .header-title').html(me.config.botMessages.reconnecting);\n  // me.chatEle.find('.chat-container').html(\"\");\n  me.bot.close();\n  me.config.botOptions.maintainContext = false;\n  me.setLocalStoreItem('kr-cw-uid', me.config.botOptions.userIdentity);\n  me.bot.init(me.config.botOptions);\n};\n\nsendMessageWithWithChatInput(chatInput:any){\n  let me:any=this;\n  if (chatInput.text().trim() === '') {\n    return;\n  }\n  me.sendMessageToBot(chatInput.text());\n  chatInput.html(chatInput.html().replaceAll('<br>', '\\n'));\n  chatInput.html('');\n}\nbindEvents  () {\n  const me:any = this;\n  const _chatContainer = me.chatEle;\n  window.onresize = function (event:any) {\n    me.onWindowResize(event);\n  };\n  window.onbeforeunload = function () {\n    if (me && $(me.chatEle).length > 0) {\n      me.destroy();\n    }\n  };\n  _chatContainer.on('keyup', '.chatInputBox',  (event:any) => {\n    const _footerContainer = $(me.config.container).find('.kore-chat-footer');\n    const _bodyContainer = $(me.config.container).find('.kore-chat-body');\n    _bodyContainer.css('bottom', _footerContainer.outerHeight());\n    me.prevComposeSelection = window.getSelection();\n    me.prevRange = me.prevComposeSelection.rangeCount > 0 && me.prevComposeSelection.getRangeAt(0);\n    if (event.currentTarget.innerText.length > 0) {\n      _chatContainer.find('.chatInputBoxPlaceholder').css('display', 'none');\n      _chatContainer.find('.sendButton').removeClass('disabled');\n    } else {\n      _chatContainer.find('.chatInputBoxPlaceholder').css('display', 'block');\n      _chatContainer.find('.sendButton').addClass('disabled');\n    }\n  });\n  _chatContainer.on('click', '.chatInputBoxPlaceholder', () => {\n    _chatContainer.find('.chatInputBox').trigger('click');\n    _chatContainer.find('.chatInputBox').trigger('focus');\n  });\n  _chatContainer.on('change', '.lang-selector', (e: { target: any; }) => {\n    const selectedValue = $(e.target).val();\n    me.seti18n(selectedValue);\n    me.updatei18nDirection();\n  });\n  _chatContainer.on('click', '.chatInputBox', () => {\n    me.prevComposeSelection = window.getSelection();\n    me.prevRange = me.prevComposeSelection.rangeCount > 0 && me.prevComposeSelection.getRangeAt(0);\n  });\n  _chatContainer.on('keydown', '.chatInputBox',  (event:any) => {\n    const chatInput:any = $(event.currentTarget);\n    let chatWindowEvent = {stopFurtherExecution: false};\n    me.emit(me.EVENTS.ON_KEY_DOWN,{\n      event:event,\n      chatWindowEvent: chatWindowEvent\n    });\n    if(chatWindowEvent.stopFurtherExecution){\n      return false;\n    }\n    const _footerContainer = $(me.config.container).find('.kore-chat-footer');\n    const _bodyContainer = $(me.config.container).find('.kore-chat-body');\n    _bodyContainer.css('bottom', _footerContainer.outerHeight());\n    if (event.keyCode === 13) {\n      if (event.shiftKey) {\n        return;\n      }\n      event.preventDefault();\n      me.sendMessageWithWithChatInput(chatInput);\n    } \n  });\n\n  _chatContainer.on('click', '.sendButton', (event: { preventDefault: () => void; }) => {\n    const chatInput:any =  _chatContainer.find('.chatInputBox');\n    event.preventDefault();\n    me.sendMessageWithWithChatInput(chatInput);\n  });\n  \n  _chatContainer.on('click', '.sendChat', (event: any) => {\n    const _footerContainer = $(me.config.container).find('.kore-chat-footer');\n    me.sendMessageWithWithChatInput(_footerContainer.find('.chatInputBox'));\n  });\n\n  _chatContainer.on('click', 'li a',  (e: any) => {\n    e.preventDefault();\n    const a_link = $(this).attr('href');\n    const _trgt = $(this).attr('target');\n    const msgDataText = $(e.currentTarget).closest('span.simpleMsg').attr('msgData') || '';\n    let msgData;\n    if (msgDataText) {\n      try {\n        msgData = JSON.parse(msgDataText);\n      } catch (err) {\n\n      }\n    }\n    if (msgData && msgData.message && msgData.message[0].component && msgData.message[0].component.payload && msgData.message[0].component.payload.formData) {\n      me.renderWebForm(msgData);\n    } else if (_trgt === '_self') {\n      callListener('provideVal', { link: a_link });\n      return;\n    }\n    if (me.config.allowIframe === true) {\n      const popupHtml = $(me.getChatTemplate('iframe')).tmpl({\n        msgData,\n        helpers: me.helpers,\n        link_url: URL,\n      });\n      popupHtml[0].onload = function (iFrameEvent: any) {\n        console.log(iFrameEvent);\n      };\n      me.openModal(popupHtml[0], true);\n    } else {\n      me.openExternalLink(a_link);\n    }\n  });\n  \n  _chatContainer.on('click', '.close-btn', (event: any) => {\n    me.destroy();\n    bot.historyOffset = 0;\n    bot.previousHistoryLoading = false;\n    if (me.config.multiPageApp && me.config.multiPageApp.enable) {\n      me.removeLocalStoreItem('kr-cw-state');\n      me.removeLocalStoreItem('kr-cw-uid');\n      me.config.botOptions.maintainContext = false;\n    }\n  });\n\n  _chatContainer.on('click', '.minimize-btn', (event: any) => {\n    if (me.config.multiPageApp && me.config.multiPageApp.enable) {\n      me.setLocalStoreItem('kr-cw-state', 'minimized');\n    }\n    if (me.minimized === true) {\n      _chatContainer.removeClass('minimize');\n      me.minimized = false;\n    } else {\n      _chatContainer.addClass('minimize');\n      _chatContainer.find('.minimized-title').html(`Talk to ${me.config.chatTitle}`);\n      me.minimized = true;\n      if (me.expanded === true) {\n        $('.kore-chat-overlay').hide();\n      }\n    }\n  });\n\n  _chatContainer.off('click', '.expand-btn').on('click', '.expand-btn',  (event: any) => {\n    if (me.expanded === true) {\n      $(this).attr('title', 'Expand');\n      _chatContainer.removeClass('expanded');\n      $('.expand-btn-span').removeClass('fa-compress');\n      $('.expand-btn-span').addClass('fa-expand');\n      me.expanded = false;\n      $('.chat-container').scrollTop($('.chat-container')[0].scrollHeight);\n    } else {\n      $(this).attr('title', 'Collapse');\n      _chatContainer.addClass('expanded');\n      $('.expand-btn-span').addClass('fa-compress');\n      $('.expand-btn-span').removeClass('fa-expand');\n      me.expanded = true;\n    }\n    const evt = document.createEvent('HTMLEvents');\n    evt.initEvent('resize', true, false);\n    window.dispatchEvent(evt);\n    const container_pos_left = _chatContainer.position().left + _chatContainer.width();\n    if (container_pos_left > $(window).width()) {\n      _chatContainer.css('left', `${_chatContainer.position().left - (container_pos_left - $(window).width() + 10)}px`);\n    }\n    if (me.chatPSObj && me.chatPSObj.update) {\n      me.chatPSObj.update();\n    }\n  });\n\n  $(document).on('keyup', (evt: { keyCode: number; }) => {\n    if (evt.keyCode == 27) {\n      $('.closeImagePreview').trigger('click');\n      $('.closeElePreview').trigger('click');\n    }\n  });\n  \n  _chatContainer.on('click', '.minimized,.minimized-title', (event: any) => {\n    if (me.config.multiPageApp && me.config.multiPageApp.enable) {\n      me.setLocalStoreItem('kr-cw-state', 'open');\n    }\n    _chatContainer.removeClass('minimize');\n    me.minimized = false;\n    if (me.skipedInit) {\n      if (me.config.multiPageApp && me.config.multiPageApp.enable) {\n        me.setLocalStoreItem('kr-cw-uid', me.config.botOptions.userIdentity);\n      }\n      me.bot.init(me.config.botOptions, me.config.messageHistoryLimit);\n      me.skipedInit = false;\n    }\n    const evt = document.createEvent('HTMLEvents');\n    evt.initEvent('resize', true, false);\n    $('.chat-container').animate({\n      scrollTop: $('.chat-container').prop('scrollHeight'),\n    }, 100);\n  });\n\n  _chatContainer.on('click', '.reload-btn',  (event: any) => {\n    me.config.botOptions.forceReconnecting = false;// make it to true if reconnect button should not trigger on connect message\n    $(this).addClass('disabled').prop('disabled', true);\n    $('.close-btn').addClass('disabled').prop('disabled', true);\n    setTimeout(() => {\n      me.resetWindow();\n    });\n  });\n  if (me?.config?.history?.paginatedScroll?.enable) {\n    _chatContainer.find('.kore-chat-body .chat-container').on('scroll', (event: any) => {\n      var div = $(event.currentTarget);\n      if (div[0].scrollHeight - div.scrollTop() == div.height()) {\n        bot.previousHistoryLoading = false;\n      }\n      else if (div.scrollTop() == 0) {\n        if (bot.paginatedScrollDataAvailable) {\n          bot.previousHistoryLoading = true;\n          let message = me?.config?.history?.paginatedScroll?.loadingLabel || 'Loading chat history..';\n          let paginatedHistoryLoader = $('<div class=\"paginted-history-loader\">\\\n                                              <div class=\"historyWarningTextDiv displayTable\">  \\\n                                                <span><img class=\"loadingHistory\" src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAARCAYAAAA7bUf6AAAAAXNSR0IArs4c6QAAAYZJREFUOBGtVLFKA0EQfbMiiERQEgjpRQt/wULB/opIFCuJvb1iKdprbbASDaa4L9DCX7BQ7CVwQcEggph13t7t3RlivMKBsDsz701mZ9+eYNjaNyX0e9saDmCxZJv1mrQ6zxDcayxEqXyOxmo/TzN5B2fXDbxFT7D2VH9rgK3FeV3pM848cTnLirQ6e0q60lw1lx+11bziHD5Oi1tcZVfAkyIYOYRM3GF69gHvr4uwX8sY2AMFVDwIkA3srLcFnAFb9B2I3GJqchNbQTcDJ7uLsIqPz0s91koS6WKmMm+SIfojRL8WIIuF+QdAlBSpks+ZBEkA7gijOkgBumGeR80sMLzG1OcMilgep3wDseWUxyEWsTnzmMKUr51ILw3wForYy2AhhSlfO3FKjGO8xiKWxymfgw1THnXAaxxnzMd68ajQuLcAeE1UnA5+K+R1kgmuS/4/KdY3xbdgB0fe/XMVs49m/Zi4uBPPiN/Qibrj5qJHl12+GU/7WYTRoe+J0xFlMOZ78g1n4achujvX7QAAAABJRU5ErkJggg==\"></span>                \\\n                                                <p class=\"headerTip warningTip\">'+ message + '</p>\\\n                                                </div>\\\n                                            </div>');\n          if (!(_chatContainer.find('.paginted-history-loader').length)) {\n            $(paginatedHistoryLoader).insertBefore(_chatContainer.find('.chat-container li:first'));\n          }\n          bot.getHistory({ limit: (me?.config?.history?.paginatedScroll?.batchSize) });\n        }\n      }\n    });\n  }\n  me.bindSDKEvents();\n};\n\ngetBotMetaData  () {\n  const me:any = this;\n  me.bot.getBotMetaData((res: any) => {\n    me.sendWebhookOnConnectEvent();\n  }, (errRes: any) => {\n    me.sendWebhookOnConnectEvent();\n  });\n};\nsendWebhookOnConnectEvent  () {\n  const me:any = this;\n  me.sendMessageViaWebHook({\n    type: 'event',\n    val: 'ON_CONNECT',\n  }, (msgsData: any) => {\n    me.onBotReady();\n    me.handleWebHookResponse(msgsData);\n  }, () => {\n    me.onBotReady();\n    console.log('Kore:error sending on connect event');\n  }, {\n    session: {\n      new: true,\n    },\n  });\n};\n\nbindSDKEvents  () {\n  // hook to add custom events\n  const me:any = this;\n  let chatWindowEvent = {stopFurtherExecution: false};\n  me.bot.on('open', (response: any) => {\n    me.emit(me.EVENTS.ON_WS_OPEN, {messageData:\"\",chatWindowEvent:chatWindowEvent});\n    if(chatWindowEvent.stopFurtherExecution){\n      return false;\n    }\n    me.onBotReady();\n  });\n\n  me.bot.on('message', (response: { data: string; }) => {\n    // actual implementation starts here\n    if (me.popupOpened === true) {\n      $('.kore-auth-popup .close-popup').trigger('click');\n    }\n\n    let tempData = JSON.parse(response.data);\n    let chatWindowEvent = {stopFurtherExecution: false};\n    me.emit(me.EVENTS.ON_WS_MESSAGE,{\n      messageData:tempData,\n      chatWindowEvent:chatWindowEvent\n    });\n    if(chatWindowEvent.stopFurtherExecution){\n      return false;\n    }\n\n    let msgData=me.parseSocketMessage(response.data);\n    if (me.loadHistory && me.historyLoading) {\n        me.messagesQueue.push(msgData)\n    } else {\n        if (me.config.supportDelayedMessages) {\n            me.pushTorenderMessagesQueue(msgData)\n        } else {\n            me.renderMessage(msgData)\n        }\n    }\n    // if (msgData.type === 'appInvalidNotification') {\n    //   setTimeout(() => {\n    //     $('.trainWarningDiv').addClass('showMsg');\n    //   }, 2000);\n    // }\n  });\n\n  me.bot.on('webhook_ready', (response: any) => {\n    if (!me.config.loadHistory) {\n      me.getBotMetaData();\n    }\n  });\n\n  me.bot.on('webhook_reconnected', (response: any) => {\n    me.onBotReady();\n  });\n\n  me.bot.on('jwtgrantsuccess', (response: { jwtgrantsuccess: any; }) => {\n    me.config.jwtGrantSuccessInformation = response.jwtgrantsuccess;\n    me.getBrandingInformation(response.jwtgrantsuccess);\n    me.emit(me.EVENTS.JWT_GRANT_SUCCESS, response.jwtgrantsuccess);\n  });\n};\nparseSocketMessage(msgString:string){\n  let me:any=this;\n  let msgData;\n  let tempData= JSON.parse(msgString);\n  if (tempData.from === 'bot' && tempData.type === 'bot_response') {\n    if (tempData && tempData.message && tempData.message.length) {\n      if (tempData.message[0]) {\n        if (!tempData.message[0].cInfo) {\n          tempData.message[0].cInfo = {};\n        }\n        if (tempData.message[0].component && !tempData.message[0].component.payload.text) {\n          try {\n            tempData.message[0].component = JSON.parse(tempData.message[0].component.payload);\n          } catch (err) {\n            tempData.message[0].component = tempData.message[0].component.payload;\n          }\n        }\n        if (tempData.message[0].component && tempData.message[0].component.payload && tempData.message[0].component.payload.text) {\n          tempData.message[0].cInfo.body = tempData.message[0].component.payload.text;\n        }\n        if (tempData.message[0].component && tempData.message[0].component.payload && (tempData.message[0].component.payload.videoUrl || tempData.message[0].component.payload.audioUrl)) {\n          tempData.message[0].cInfo.body = tempData.message[0].component.payload.text || '';\n        }\n      }\n    }\n    msgData=tempData;\n  } else if (tempData.from === 'self' && tempData.type === 'user_message' && tempData.event !==\"stop_typing\" && tempData.event !==\"typing\"&& tempData.event !==\"message_read\") {\n    const tempmsg = tempData.message;\n    if (tempmsg && tempmsg.attachments && tempmsg.attachments[0] && tempmsg.attachments[0].fileId) {\n      msgData = {\n        type: 'currentUser',\n        message: [{\n          type: 'text',\n          cInfo: { body: tempmsg.body, attachments: tempmsg.attachments },\n          clientMessageId: tempData.id,\n        }],\n        createdOn: tempData.id,\n      };\n    } else {\n      msgData = {\n        type: 'currentUser',\n        message: [{\n          type: 'text',\n          cInfo: { body: tempmsg.body },\n          clientMessageId: tempData.id,\n        }],\n        createdOn: tempData.id,\n      };\n    }\n    //me.renderMessage(msgData);\n  }\n  return msgData;\n}\n\nonBotReady  () {\n  // hook to add custom events\n  const me:any = this;\n  const _chatContainer = me.chatEle;\n  // actual implementation starts here\n  me.accessToken = me.config.botOptions.accessToken;\n  const _chatInput = _chatContainer.find('.kore-chat-footer .chatInputBox');\n  _chatContainer.find('.kore-chat-header .header-title').html(me.config.chatTitle).attr('title', me.config.chatTitle);\n  _chatContainer.find('.kore-chat-header .disabled').prop('disabled', false).removeClass('disabled');\n  if (!me.loadHistory) {\n    setTimeout(() => {\n      _chatContainer.find('.chatInputBox').focus();\n      _chatContainer.find('.disableFooter').removeClass('disableFooter');\n    });\n  }\n};\nbindIframeEvents  (authPopup: { on: (arg0: string, arg1: string, arg2: () => void) => void; find: (arg0: string) => any[]; }) {\n  const me:any = this;\n  authPopup.on('click', '.close-popup',  () => {\n    $(this).closest('.kore-auth-popup').remove();\n    $('.kore-auth-layover').remove();\n    me.popupOpened = false;\n  });\n\n  const ifram = authPopup.find('iframe')[0];\n\n  ifram.addEventListener('onload',  () => {\n    console.log(this);\n  }, true);\n};\n\n\nrender  (chatWindowHtml: any) {\n  const me:any = this;\n  let chatWindowEvent = {stopFurtherExecution: false};\n  me.emit(me.EVENTS.BEFORE_VIEW_INIT,{chatEle:chatWindowHtml,chatWindowEvent:chatWindowEvent});\n  me.bindEvents();\n  $(me.config.container).append(chatWindowHtml);\n  me.emit(me.EVENTS.VIEW_INIT,{chatEle:chatWindowHtml,chatWindowEvent:chatWindowEvent});\n  if(chatWindowEvent.stopFurtherExecution){\n    return false;\n  }\n  if (me.config.container !== 'body') {\n    $(me.config.container).addClass('pos-relative');\n    $(me.chatEle).addClass('pos-absolute');\n  }\n  if (me.config.widgetSDKInstace) {\n    me.chatEle.find('.kr-wiz-menu-chat').show();\n  }\n  me.chatPSObj = new KRPerfectScrollbar(me.chatEle.find('.chat-container').get(0), {\n    suppressScrollX: true,\n  });\n};\n\n\n\nsendMessageToBot  (messageText: { trim: () => { (): any; new(): any; length: any; }; }, options: { renderMsg: any; }, serverMessageObject: any,clientMessageObject: any) {\n  const me:any = this;\n  const clientMessageId = new Date().getTime();\n  let msgData:any = {\n    type: 'currentUser',\n    message: [{\n      type: 'text',\n      cInfo: { \n        body: messageText,\n        // 'attachments': serverMessageObject.message.attachments \n      },\n      clientMessageId,\n    }],\n    createdOn: clientMessageId,\n  };\n  let messageToBot:any = {\n    clientMessageId:clientMessageId,\n    resourceid :'/bot.message',\n  };\nif(messageText.trim().length){\n  messageToBot[\"message\"] = { \n    body: messageText.trim()\n  }\n}\n  \n\n  if (options && options.renderMsg && typeof options.renderMsg === 'string') {\n    msgData.message[0].cInfo.body = options.renderMsg;\n    messageToBot.message.renderMsg = options.renderMsg;\n  }\n\n  if(serverMessageObject){\n    me.extend(messageToBot,serverMessageObject);\n  }\n  // if (msgObject && msgObject.customdata) {\n  //   messageToBot.message.customdata = msgObject.customdata;\n  // }\n  // if (msgObject && msgObject.metaTags) {\n  //   messageToBot.message.metaTags = msgObject.metaTags;\n  // }\n\n  // if (msgObject && (msgObject.nlmeta || msgObject.nlMeta)) {\n  //   messageToBot.message.nlMeta = msgObject.nlmeta || msgObject.nlMeta;\n  // }\n  if (me.config && me.config && me.config.botOptions && me.config.botOptions.webhookConfig && me.config.botOptions.webhookConfig.enable) {\n    me.sendMessageViaWebHook(\n      messageText,\n      (msgsData: any) => {\n        me.handleWebHookResponse(msgsData);\n      },\n      (err: any) => {\n        setTimeout(() => {\n          me.hideTypingIndicator();\n          $(`.kore-chat-window [data-time=\"${clientMessageId}\"]`).find('.messageBubble').append('<div class=\"errorMsg\">Send Failed. Please resend.</div>');\n        }, 350);\n      },\n      me.attachmentInfo ? { attachments: [me.attachmentInfo] } : null,\n    );\n  } else {\n    let chatWindowEvent = {stopFurtherExecution: false};\n    me.emit(me.EVENTS.BEFORE_WS_SEND_MESSAGE,{\n      messageToBot:messageToBot,\n      chatWindowEvent:chatWindowEvent\n    });\n    if(chatWindowEvent.stopFurtherExecution){\n      return false;\n    }\n    me.bot.sendMessage(messageToBot, (err: { message: any; }) => {\n      if (err && err.message) {\n        setTimeout(() => {\n          $(`.kore-chat-window [data-time=\"${clientMessageId}\"]`).find('.messageBubble').append('<div class=\"errorMsg\">Send Failed. Please resend.</div>');\n        }, 350);\n      }\n    });\n  }\n  \n  me.resetPingMessage();\n  me.postSendMessageToBot();\n  if(clientMessageObject){\n    me.extend(msgData,clientMessageObject);\n  }\n  me.renderMessage(msgData);\n};\n\npostSendMessageToBot () {\n  let me:any=this;\n  const _bodyContainer = $(me.chatEle).find('.kore-chat-body');\n  const _footerContainer = $(me.chatEle).find('.kore-chat-footer');\n  _footerContainer.find('.sendButton').addClass('disabled');\n  _bodyContainer.css('bottom', _footerContainer.outerHeight());\n\n  me.showTypingIndicator();\n  if (me.typingIndicatorTimer) {\n    clearTimeout(me.typingIndicatorTimer);\n  }\n  me.typingIndicatorTimer = setTimeout(() => {\n    me.hideTypingIndicator();\n  }, me.config.maxTypingIndicatorTime || 10000);\n}\n\nhandleWebHookResponse  (msgsData: any[]) {\n  let me:any=this;\n  const SUBSEQUENT_RENDER_DELAY = 500;\n  if (msgsData && msgsData.length) {\n    msgsData.forEach((msgData: any, index: number) => {\n      setTimeout(() => {\n        me.renderMessage(msgData);\n      }, (index >= 1) ? SUBSEQUENT_RENDER_DELAY : 0);\n    });\n  }\n};\n\nsendMessageViaWebHook  (message: { text: any; }, successCb: any, failureCB: any, options: { session: { new: boolean; }; attachments: any; }) {\n  const me:any = this;\n  if (me.config.botOptions.webhookConfig.webhookURL) {\n    const payload:any = {\n      session: {\n        new: false,\n      },\n      message: {\n        text: message,\n      },\n      from: {\n        id: me.config.botOptions.userIdentity,\n        userInfo: {\n          firstName: '',\n          lastName: '',\n          email: '',\n        },\n      },\n      to: {\n        id: 'Kore.ai',\n        groupInfo: {\n          id: '',\n          name: '',\n        },\n      },\n    };\n\n    if (me.config.botOptions.webhookConfig.apiVersion && me.config.botOptions.webhookConfig.apiVersion === 2) {\n      payload.message = {\n        type: 'text',\n        val: message,\n      };\n    }\n    if (typeof message === 'object') {\n      payload.message = message;\n    }\n    if (options && options.session) {\n      payload.session = options.session;\n    }\n    if (options && options.attachments) {\n      payload.message.attachments = options.attachments;\n    }\n\n    me.bot.sendMessageViaWebhook(payload, successCb, failureCB);\n  } else {\n    console.error('KORE:Please provide webhookURL in webhookConfig');\n  }\n};\n\ncloseConversationSession  () {\n  const me:any = this;\n  const clientMessageId = new Date().getTime();\n  const messageToBot:any = {};\n  messageToBot.clientMessageId = clientMessageId;\n  messageToBot.resourceid = '/bot.closeConversationSession';\n  bot.sendMessage(messageToBot, (err: any) => {\n    console.error('bot.closeConversationSession send failed sending');\n  });\n};\n\nshowTypingIndicator  () {\n  let me:any=this;\n  $('.typingIndicatorContent').css('display', 'block');\n};\nhideTypingIndicator  () {\n  $('.typingIndicatorContent').css('display', 'none');\n};\nrenderMessage  (msgData: { createdOnTimemillis: number; createdOn: string | number | Date; type: string; icon: any; message: { component: { payload: { fromHistory: any; }; }; }[]; messageId: any; renderType: string; fromHistorySync: any; } | any) {\n\n  let me:any = this;\n  let _chatContainer = $(me.chatEle).find('.chat-container');\n  let messageHtml=me.generateMessageDOM(msgData);\n  if(msgData?.createdOn){\n    msgData.createdOnTimemillis = new Date(msgData.createdOn).valueOf();\n  }\n\n  if (msgData?.type === 'bot_response') {\n    me.waiting_for_message = false;\n    setTimeout(() => {\n      $(me.chatEle).find('.typingIndicator').css('background-image', `url(${msgData.icon})`);\n    }, 500);\n    setTimeout(() => {\n      if (!me.waiting_for_message) {\n        if (me.typingIndicatorTimer) {\n          clearTimeout(me.typingIndicatorTimer);\n        }\n        me.hideTypingIndicator()\n      }\n    }, 500);\n  } else {\n    me.waiting_for_message = false;\n  }\n\n  if (!messageHtml && msgData && msgData.message && msgData.message[0]) {\n    // if (msgData.message[0] && msgData.message[0].component && msgData.message[0].component.payload && msgData.message[0].component.payload.template_type == 'button') {\n    //   messageHtml = $(me.getChatTemplate('templatebutton')).tmpl({\n    //     msgData,\n    //     helpers,\n    //     extension,\n    //   });\n    // } else \n    if (msgData.message[0] && msgData.message[0].component && msgData.message[0].component.payload && msgData.message[0].component.payload.template_type == 'wait_for_response') { // to show typing indicator until next response receive\n      me.waiting_for_message = true;\n      me.showTypingIndicator();\n      return;\n    } \n\n    //messageHtml=me.messageTemplate.renderMessage(msgData);\n    \n    // For Agent presence\n    if (msgData.type === 'bot_response') {\n      if (msgData.message[0] && msgData.message[0].component && msgData.message[0].component.payload && msgData.message[0].component.payload.template_type == 'live_agent') {\n        $('.kore-chat-window').addClass('agent-on-chat');\n      } else {\n        $('.kore-chat-window').removeClass('agent-on-chat');\n      }\n    }\n  }\n  _chatContainer.find('li').attr('aria-live', 'off');\n  // _chatContainer.find('li').attr('aria-hidden','true');//for mac voiceover bug with aria-live\n  let chatWindowEvent = {stopFurtherExecution: false};\n  me.emit(me.EVENTS.BEFORE_RENDER_MSG,{\n    messageHtml:messageHtml,\n    msgData:msgData,\n    chatWindowEvent:chatWindowEvent\n  });\n  if(chatWindowEvent.stopFurtherExecution){\n    return false;\n  }\n\n\n  // if (msgData && msgData.message[0] && msgData.message[0].component && msgData.message[0].component.payload && msgData.message[0].component.payload.sliderView && !msgData.message[0].component.payload.fromHistory) {\n  //   me.bottomSliderAction('show', messageHtml);\n  // } else {\n    // ignore message(msgId) if it is already in viewport\n  if ($(`.kore-chat-window .chat-container li#${msgData?.messageId}`).length < 1 || (msgData?.renderType === 'inline')) {\n    if (msgData?.type === 'bot_response' && msgData?.fromHistorySync) {\n      const msgTimeStamps: number[] = [];\n      const msgEles = $('.kore-chat-window .chat-container>li');\n      if (msgEles.length) {\n        msgEles.each((i: any, ele: any) => {\n          msgTimeStamps.push(parseInt($(ele).attr('data-time')));\n        });\n        const insertAtIndex = me.findSortedIndex(msgTimeStamps, msgData.createdOnTimemillis);\n\n        if (insertAtIndex > 0) {\n          const insertAfterEle = msgEles[insertAtIndex];\n          if (insertAfterEle) {\n            $(messageHtml).insertBefore(insertAfterEle);\n          } else {\n            _chatContainer.append(messageHtml);\n          }\n        } else {\n          _chatContainer.prepend(messageHtml);\n        }\n      } else {\n        _chatContainer.append(messageHtml);\n      }\n    } else {\n      if(bot && !bot.previousHistoryLoading){\n        _chatContainer.append(messageHtml);\n      }else{\n        $(this.paginatedScrollMsgDiv).find('.prev-message-list').append(messageHtml);\n      }\n\n    }\n  }\n  //}\n  me.handleImagePreview();\n\n  if (me.chatPSObj && me.chatPSObj.update) {\n    me.chatPSObj.update();\n  }\n  if(bot && !bot.previousHistoryLoading){\n  _chatContainer.animate({\n    scrollTop: _chatContainer.prop('scrollHeight'),\n  }, 100);\n  }\n  me.emit(me.EVENTS.AFTER_RENDER_MSG,{\n    messageHtml:messageHtml,\n    msgData:msgData\n  });\n};\n\ngenerateMessageDOM(msgData?:any){\n  const me:any = this; \n  let messageHtml = me.templateManager.renderMessage(msgData);\n  if(messageHtml==='_ignore_message_render_'){\n    return \"\";\n  }\n  if (!messageHtml && msgData && msgData.message && msgData.message[0]) {\n    messageHtml=me.messageTemplate.renderMessage(msgData);\n  }\n  return messageHtml;\n}\n\npushTorenderMessagesQueue  (msgItem: any) {\n  const me:any = this;\n  if (!me.renderMessagesQueue) {\n    me.renderMessagesQueue = [];\n  }\n  me.renderMessagesQueue.push(msgItem);\n  if (!me.renderEventLoop) {\n    me.startRenderEventLoop();\n  }\n};\nstartRenderEventLoop  () {\n  const me:any = this;\n  me.msgRenderingProgress = false;\n  me.renderEventLoop = setInterval(() => {\n    console.log('Running Event loop');\n    me.checkForMsgQueue();\n  }, 500);\n};\ncheckForMsgQueue  () {\n  const me:any = this;\n  if (me.renderMessagesQueue.length && !me.msgRenderingProgress) {\n    const tempData = me.renderMessagesQueue.shift();\n    let delay = 0;\n    if (tempData?.message[0]?.component?.payload?.renderDelay) {\n      delay = tempData.message[0].component.payload.renderDelay || 0;\n    }\n    me.msgRenderingProgress = true;\n    setTimeout(() => {\n      me.renderMessage(tempData);\n      me.msgRenderingProgress = false;\n    }, delay);\n  }\n  if (!me.renderMessagesQueue.length && !me.msgRenderingProgress && me.renderEventLoop) {\n    clearTimeout(me.renderEventLoop);\n    me.renderEventLoop = false;\n  }\n};\n\n\nopenPopup  (link_url: any) {\n  const me:any = this;\n  const popupHtml = $(me.getChatTemplate('popup')).tmpl({\n    link_url,\n  });\n  $(me.config.container).append(popupHtml);\n  me.popupOpened = true;\n  me.bindIframeEvents($(popupHtml));\n};\n\nopenExternalLink  (link_url: any) {\n  const me:any = this;\n  const a = document.createElement('a');\n  $(me.config.container).append(a);\n  a.href = link_url;\n  a.target = '_blank';\n  a.rel = 'noopener noreferrer';// for tabnabbing security attack\n  a.click();\n  $(a).remove();\n};\n\ngetChatTemplate (tempType: string) {\n     var chatFooterTemplate =\n     '<div class=\"footerContainer pos-relative\"> \\\n         {{if userAgentIE}} \\\n         <div role=\"textbox\" class=\"chatInputBox inputCursor\" aria-label=\"Message\" aria-label=\"Message\" contenteditable=\"true\" placeholder=\"${botMessages.message}\"></div> \\\n         {{else}} \\\n         <div role=\"textbox\" class=\"chatInputBox\" contenteditable=\"true\" placeholder=\"${botMessages.message}\"></div> \\\n         {{/if}} \\\n     <div class=\"attachment\"></div> \\\n     {{if !(isSendButton)}}<div class=\"chatSendMsg\">${botMessages.entertosend}</div>{{/if}} \\\n </div>';\n\n var chatWindowTemplate = '<script id=\"chat_window_tmpl\" type=\"text/x-jqury-tmpl\"> \\\n     <div class=\"kore-chat-window droppable liteTheme-one\"> \\\n     <div class=\"kr-wiz-menu-chat defaultTheme-kore\">\\\n     </div>\t\\\n         <div class=\"minimized-title\"></div> \\\n         <div class=\"minimized\"><span class=\"messages\"></span></div> \\\n         <div class=\"kore-chat-header\"> \\\n             <div id=\"botHeaderTitle\" aria-labelledby=\"botHeaderTitle\" class=\"header-title\" title=\"${chatTitle}\">${chatTitle}</div> \\\n             <div class=\"chat-box-controls\"> \\\n                 {{if botMessages.availableLanguages}}\\\n                     <select class=\"lang-selector\" >\\\n                         {{each(key, lang) botMessages.availableLanguages}} \\\n                             <option  {{if botMessages.selectedLanguage===lang}}selected{{/if}} value=\"${lang}\">${lang}</option>\\\n                         {{/each}}\\\n                     </select>\\\n                 {{/if}}\\\n                 <button class=\"reload-btn\" title=\"${botMessages.reconnectText}\"></button> \\\n                 <button class=\"minimize-btn\" title=\"${botMessages.minimizeText}\"></button> \\\n                 <button class=\"expand-btn\" title=\"${botMessages.expandText}\"></button>\\\n                 <button class=\"close-btn\" title=\"${botMessages.expandText}\"></button> \\\n             </div> \\\n         </div> \\\n         <div class=\"kore-chat-header historyLoadingDiv\"> \\\n             <div class=\"historyWarningTextDiv displayTable\"> \\\n                 <span><img class = \"loadingHistory\" src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAARCAYAAAA7bUf6AAAAAXNSR0IArs4c6QAAAYZJREFUOBGtVLFKA0EQfbMiiERQEgjpRQt/wULB/opIFCuJvb1iKdprbbASDaa4L9DCX7BQ7CVwQcEggph13t7t3RlivMKBsDsz701mZ9+eYNjaNyX0e9saDmCxZJv1mrQ6zxDcayxEqXyOxmo/TzN5B2fXDbxFT7D2VH9rgK3FeV3pM848cTnLirQ6e0q60lw1lx+11bziHD5Oi1tcZVfAkyIYOYRM3GF69gHvr4uwX8sY2AMFVDwIkA3srLcFnAFb9B2I3GJqchNbQTcDJ7uLsIqPz0s91koS6WKmMm+SIfojRL8WIIuF+QdAlBSpks+ZBEkA7gijOkgBumGeR80sMLzG1OcMilgep3wDseWUxyEWsTnzmMKUr51ILw3wForYy2AhhSlfO3FKjGO8xiKWxymfgw1THnXAaxxnzMd68ajQuLcAeE1UnA5+K+R1kgmuS/4/KdY3xbdgB0fe/XMVs49m/Zi4uBPPiN/Qibrj5qJHl12+GU/7WYTRoe+J0xFlMOZ78g1n4achujvX7QAAAABJRU5ErkJggg==\"></span> \\\n                 <p class=\"headerTip warningTip\">${botMessages.loadinghistory}</p> \\\n             </div> \\\n         </div> \\\n         <div class=\"kore-chat-header trainWarningDiv\"> \\\n             <div class=\"trainWarningTextDiv displayTable\"> \\\n                 <span class=\"exclamation-circle\"><i class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i></span> \\\n                 <p class=\"headerTip warningTip\">Something went wrong.Please try again later.</p> \\\n             </div> \\\n         </div> \\\n         <div role=\"log\" aria-live=\"polite\" aria-atomic=\"true\" class=\"kore-chat-body\"> \\\n             <div class=\"errorMsgBlock\"> \\\n             </div> \\\n             <ul class=\"chat-container\"></ul> \\\n         </div> \\\n         <div class=\"typingIndicatorContent\"><div class=\"typingIndicator\"></div><div class=\"movingDots\"></div></div> \\\n         <div class=\"kore-chat-footer disableFooter\">' + chatFooterTemplate + '{{if isSendButton}}<div class=\"sendBtnCnt\"><button class=\"sendButton disabled\" type=\"button\">${botMessages.sendText}</button></div>{{/if}}</div> \\\n          <div id=\"myModal\" class=\"modalImagePreview\">\\\n               <span class=\"closeImagePreview\">&times;</span>\\\n               <img class=\"modal-content-imagePreview\" id=\"img01\">\\\n               <div id=\"caption\"></div>\\\n         </div>\\\n         <div id=\"chatBodyModal\" class=\"chatBodyModal animate-bottom\">\\\n         <span class=\"closeChatBodyModal\" aira-label=\"Close Form\" role=\"button\" tabindex=\"0\" aria-atomic=\"true\"></span>\\\n         <div id=\"closeInlineModel\" class=\"loading_form iframeLoader\"></div>\\\n         <div id=\"chatBodyModalContent\"></div>\\\n         </div>\\\n         <div id=\"myPreviewModal\" class=\"modalImagePreview\">\\\n               <span class=\"closeElePreview\">&times;</span>\\\n               <div class=\"largePreviewContent\"></div>\\\n         </div>\\\n         <div class=\"kr-wiz-content-chat defaultTheme-kore\">\\\n         </div>\\\n     </div> \\\n </script>';\n var popupTemplate = '<script id=\"kore_popup_tmpl\" type=\"text/x-jquery-tmpl\"> \\\n         <div class=\"kore-auth-layover\">\\\n             <div class=\"kore-auth-popup\"> \\\n                 <div class=\"popup_controls\"><span class=\"close-popup\" title=\"Close\">&times;</span></div> \\\n                 <iframe id=\"authIframe\" src=\"${link_url}\"></iframe> \\\n             </div> \\\n         </div>\\\n </script>'; \n if (tempType === \"popup\") {\n     return popupTemplate;\n } \n else {\n     return chatWindowTemplate;\n }\n };\n\nhistoryLoadingComplete () {\n  const me:any = this;\n  const _chatContainer = me.chatEle;\n  setTimeout((me) => {\n    $('.chatInputBox').focus();\n    $('.disableFooter').removeClass('disableFooter');\n    me.historyLoading = false;\n    if (me.config && me.config && me.config.botOptions && me.config.botOptions.webhookConfig && me.config.botOptions.webhookConfig.enable) {\n      me.getBotMetaData();\n    }\n    if ($(this.paginatedScrollMsgDiv).find('.prev-message-list li').length > 0 && bot.previousHistoryLoading) {\n      let paginatedLi = $(this.paginatedScrollMsgDiv).find('.prev-message-list li');\n      if (paginatedLi && paginatedLi.length) {\n        for (var i = 0; i < paginatedLi.length; i++) {\n          var tempLi = $(paginatedLi[i]);\n          tempLi.addClass('no-animate-messge-bubble')\n        }\n      }\n      let _existingLi = $(this.paginatedScrollMsgDiv).find('.prev-message-list li');\n      $(this.paginatedScrollMsgDiv).find('.prev-message-list li').insertBefore(_chatContainer.find('.chat-container li:first'));\n      let _heightTobeScrolled = 0;\n      if (_existingLi && _existingLi.length) {\n        for (var i = 0; i < _existingLi.length; i++) {\n          var tempLi = $(_existingLi[i]);\n          _heightTobeScrolled = _heightTobeScrolled + tempLi.height();\n        }\n      }\n      _chatContainer.find('.chat-container').scrollTop(_heightTobeScrolled);\n      $(this.paginatedScrollMsgDiv).find('.prev-message-list').empty();\n      _chatContainer.find('.paginted-history-loader').remove();\n      bot.previousHistoryLoading = false;\n    }\n  }, 0, me);\n};\n\nchatHistory  (res: { messages: string | any[]; }[] | any) {\n  const me:any = this;\n  let chatWindowEvent = {stopFurtherExecution: false};\n  me.emit(me.EVENTS.ON_CHAT_HISTORY_RESPONSE,{\n    historyResponse:res,\n    chatWindowEvent:chatWindowEvent\n  });\n  if(chatWindowEvent.stopFurtherExecution){\n    return false;\n  }\n  if (res[2] === 'historysync') {\n    // setTimeout(function () {\n    if (res && res[1] && res[1].messages.length > 0) {\n      res[1].messages.forEach((msgData: { type: string; fromHistorySync: boolean; }, index: number) => {\n        setTimeout(() => {\n          if (msgData.type === 'outgoing' || msgData.type === 'bot_response') {\n            // if ($('.kore-chat-window .chat-container li#' + msgData.messageId).length < 1) {\n            msgData.fromHistorySync = true;\n            me.renderMessage(msgData);\n            // }\n          }\n        }, index * 100);\n      });\n    }\n    // }, 4000);//sync history messages after sockeet messages gets into viewport\n  } else if (me.loadHistory) {\n    me.historyLoading = true;\n    if (res && res[1] && res[1].messages.length > 0) {\n      if(!bot.previousHistoryLoading){\n        $('.chat-container').hide();\n        $('.historyLoadingDiv').addClass('showMsg');\n      }\n      res[1].messages.forEach((msgData: { messageId: any; message: { cInfo: { body: string; }; }[]; } | any, index: number) => {\n        setTimeout((messagesQueue) => {\n         \n          const _ignoreMsgs = messagesQueue.filter((queMsg: { messageId: any; }) => queMsg?.messageId === msgData?.messageId);\n          // dont show the the history message if we already have same message came from socket connect\n          if (!_ignoreMsgs.length) {\n            msgData.fromHistory=true;\n            try {\n              msgData.message[0].cInfo.body = JSON.parse(msgData.message[0].cInfo.body);\n              if (msgData.message[0].cInfo.body && msgData.message[0].cInfo.body.text) {\n                msgData.message[0].cInfo.body = msgData.message[0].cInfo.body.text;\n              }\n              msgData.message[0].component = msgData.message[0].cInfo.body;\n              if (msgData.message[0].component.payload.template_type === 'dropdown_template') {\n                msgData.message[0].component.payload.fromHistory = true;\n                msgData.message[0].component.selectedValue = res[1].messages[index + 1].message[0].cInfo.body;\n              }\n              if (msgData.message[0].component.payload.template_type === 'multi_select' || msgData.message[0].component.payload.template_type === 'advanced_multi_select') {\n                msgData.message[0].component.payload.fromHistory = true;\n              }\n              if (msgData.message[0].component.payload.template_type === 'form_template') {\n                msgData.message[0].component.payload.fromHistory = true;\n              }\n              if (msgData.message[0].component.payload.template_type === 'tableList') {\n                msgData.message[0].component.payload.fromHistory = true;\n              }\n              if (msgData.message[0].component.payload.template_type === 'listView') {\n                msgData.message[0].component.payload.fromHistory = true;\n              }\n              // if (msgData.message[0].component.payload.template_type === 'feedbackTemplate') {\n              //     msgData.message[0].component.payload.fromHistory = true;\n              //     msgData.message[0].cInfo.body=\"Rate this chat session\";\n              // }\n              if (msgData.message[0].component && msgData.message[0].component.payload && (msgData.message[0].component.payload.videoUrl || msgData.message[0].component.payload.audioUrl)) {\n                msgData.message[0].cInfo.body = '';\n              }\n              me.renderMessage(msgData);\n            } catch (e) {\n              me.renderMessage(msgData);\n            }\n          }\n          if (index === res[1].messages.length - 1) {\n            setTimeout((messagesQueue) => {\n              $('.chat-container').show();\n              $('.historyLoadingDiv').removeClass('showMsg');\n              if(!bot.previousHistoryLoading){\n                  $('.chat-container').animate({\n                    scrollTop: $('.chat-container').prop('scrollHeight'),\n                  }, 2500);\n                  $('.chat-container').append(\"<div class='endChatContainer'><span class='endChatContainerText'>End of chat history</span></div>\");\n              }\n              if (messagesQueue.length) {\n                messagesQueue.forEach((msg: any, currIndex: number) => {\n                  me.renderMessage(msg);\n                  if (messagesQueue.length - 1 === currIndex) {\n                    messagesQueue = [];\n                    me.historyLoadingComplete();\n                  }\n                });\n              } else {\n                me.historyLoadingComplete();\n              }\n            }, 500, messagesQueue);\n          }\n        }, index * 100, me.messagesQueue);\n      });\n    } else {\n      me.historyLoadingComplete();\n    }\n  }\n};\n\ngetJWTByAPIKey (API_KEY_CONFIG: { KEY: any; bootstrapURL: any; }) {\n  const jsonData = {\n    apiKey:API_KEY_CONFIG.KEY\n  };\n  return $.ajax({\n    url: API_KEY_CONFIG.bootstrapURL||'https://bots.kore.ai/api/platform/websdk',\n    type: 'post',\n    data: jsonData,\n    dataType: 'json',\n    success(data: any) {\n    },\n    error(err: any) {\n      // chatWindowInstance.showError(err.responseText);\n    },\n  });\n};\n\ngetJWT (options: { clientId: any; clientSecret: any; userIdentity: any; JWTUrl: any; }, callback: any) {\n  const jsonData = {\n    clientId: options.clientId,\n    clientSecret: options.clientSecret,\n    identity: options.userIdentity,\n    aud: '',\n    isAnonymous: false,\n  };\n  return $.ajax({\n    url: options.JWTUrl,\n    type: 'post',\n    data: jsonData,\n    dataType: 'json',\n    success(data: any) {\n\n    },\n    error(err: any) {\n      // chatWindowInstance.showError(err.responseText);\n    },\n  });\n};\n\nJWTSetup (){\n  let me:any=this;\n  me.config.botOptions.assertionFn = me.assertionFn.bind(me);\n  if(!(me.config && me.config.JWTAsertion)){\n    if(me.config && me.config.botOptions.API_KEY_CONFIG && me.config.botOptions.API_KEY_CONFIG.KEY && me.config.botOptions.API_KEY_CONFIG.KEY!='YOUR_API_KEY'){\n      me.setupInternalAssertionFunctionWithAPIKey();\n    }else{\n      me.setupInternalAssertionFunction();\n    }\n\n  } \n}\nsetupInternalAssertionFunction (){\n  const me:any = this;\n  me.getJWT(me.config.botOptions).then(function(res: { jwt: any; }){\n    me.emit(me.EVENTS.JWT_SUCCESS, res);\n    me.setJWT(res.jwt);\n    if(me.config.botOptions.callback){\n      me.config.botOptions.callback(null, me.config.botOptions);\n    }\n  },function(errRes: any){\n      console.log(errRes);\n  });\n}\n\nsetupInternalAssertionFunctionWithAPIKey (){\n  const me:any = this;\n  me.getJWTByAPIKey(me.config.botOptions.API_KEY_CONFIG).then(function(res: { botInfo: { name: any; _id: any; }; ity: any; jwt: any; }){\n    if(me.config.widgetSDKInstace && res.botInfo){\n      var widgetsConfig=me.config.widgetSDKInstace.config;\n      widgetsConfig.botOptions.botInfo.name=res.botInfo.name;\n      widgetsConfig.botOptions.botInfo._id=res.botInfo._id;\n      widgetsConfig.botOptions.userIdentity=res.ity;\n    }\n    me.emit(me.EVENTS.JWT_SUCCESS, res);\n    me.setJWT(res.jwt);\n    if(res.botInfo){\n      me.config.chatTitle = me.config.botOptions.botInfo.chatBot=res.botInfo.name;\n      me.config.botOptions.botInfo.taskBotId=res.botInfo._id;\n    }\n    me.config.botOptions.callback(null, me.config.botOptions);\n  },function(errRes: any){\n      console.log(errRes);\n  });\n}\n\nsetJWT  (jwtToken: any) {\n  const me:any = this;\n  const options = me.config.botOptions;\n  options.assertion = jwtToken;\n};\nassertionFn (options:any, callback:any) {\n  const me:any = this;\n  options.callback = callback;\n  options.handleError = me.showError;\n  options.chatHistory = me.chatHistory.bind(me);\n  options.botDetails = me.botDetails;\n  if(me.config && me.config.JWTAsertion){\n    me.config.JWTAsertion(me.SDKcallbackWraper.bind(me));\n  }else if(options.assertion){//check for reconnect case\n    if(me.config && me.config.botOptions.API_KEY_CONFIG && me.config.botOptions.API_KEY_CONFIG.KEY!='YOUR_API_KEY'){\n      me.setupInternalAssertionFunctionWithAPIKey();\n    }else{\n      me.setupInternalAssertionFunction();\n    }\n  }\n};\nSDKcallbackWraper () {\n  const me:any = this;\n  me.config.botOptions.callback(null, me.config.botOptions);\n}\n\naddWidgetEvents  (cfg:any) {\n  let me:any=this;\n  if (cfg) {\n    var wizSDK = cfg.widgetSDKInstace;\n    wizSDK.events.onPostback = function (data:any) { \n      me.sendMessageToBot(data.payload,{renderMsg:data.utterance});\n    };\n  }\n};\n\nsetWidgetInstance  (widgetSDKInstace:any) {\n  let me:any=this;\n  if (widgetSDKInstace) {\n    me.config.widgetSDKInstace = widgetSDKInstace;\n    me.addWidgetEvents(me.config);\n  }\n};\n\n\nhideError  () {\n  $('.errorMsgBlock').removeClass('showError');\n};\nshowError (response:any) {\n  try {\n    response = JSON.parse(response);\n    if (response.errors && response.errors[0]) {\n      $('.errorMsgBlock').text(response.errors[0].msg);\n      $('.errorMsgBlock').addClass('showError');\n    }\n  } catch (e) {\n    $('.errorMsgBlock').text(response);\n    $('.errorMsgBlock').addClass('showError');\n  }\n};\n\nbottomSliderAction  (action:any, appendElement:any) {\n  $(\".kore-action-sheet\").animate({ height: 'toggle' });\n  if (action == 'hide') {\n    $(\".kore-action-sheet\").innerHTML = '';\n    $(\".kore-action-sheet\").addClass(\"hide\");\n  } else {\n    $(\".kore-action-sheet\").removeClass(\"hide\");\n    $(\".kore-action-sheet .actionSheetContainer\").empty();\n    setTimeout(function () {\n      $(\".kore-action-sheet .actionSheetContainer\").append(appendElement);\n    }, 200);\n\n  }\n}\n\nunfreezeUIOnHistoryLoadingFail () {\n  const me:any = this;\n  setTimeout((me) => {\n    if (me.loadHistory) {\n      $('.chatInputBox').focus();\n      $('.disableFooter').removeClass('disableFooter');\n      me.historyLoading = false;\n    }\n  }, 20000, me);\n};\n\n\ninstallPlugin  (plugin:any) {\n  const me:any = this;\n  me.plugins[plugin.name] = plugin;\n  plugin.hostInstance = this; \n  if(plugin.onHostCreate) { \n    plugin.onHostCreate();\n  }\n};\nscrollTop  () {\n  const me:any = this;\n  const _chatContainer = me.chatEle;\n  _chatContainer.scrollTop($('.chat-container').prop('scrollHeight'));\n};\nfocusInputTextbox () {\n  const me:any = this;\n  const _chatContainer = me.chatEle;\n  setTimeout(() => {\n    const _chatInput = _chatContainer.find('.kore-chat-footer .chatInputBox');\n    _chatInput.focus();\n  }, 600);\n};\ngetBrandingInformation(options:any){\n  let me:any = this;\n  if (me.config && me.config.enableThemes) {\n      if(!me.config.botOptions.brandingAPIUrl){\n          me.config.botOptions.brandingAPIUrl = me.config.botOptions.koreAPIUrl +'websdkthemes/'+  me.config.botOptions.botInfo.taskBotId+'/activetheme';\n      }\n      var brandingAPIUrl = (me.config.botOptions.brandingAPIUrl || '').replace(':appId', me.config.botOptions.botInfo.taskBotId);\n      $.ajax({\n          url: brandingAPIUrl,\n          type: 'get',\n          headers: {\n            'Authorization': \"bearer \" + options.authorization.accessToken,\n          },\n          dataType: 'json',\n          success: function (data: any) {  \n                  me.applySDKBranding(data);\n          },\n          error: function (err: any) {\n              console.log(err);\n          }\n      });\n  }\n\n}\napplySDKBranding  (response:any) {\n  const me:any = this;\n  if (response && response.activeTheme) {\n      for (var key in response) {\n      switch (key){\n          case 'generalAttributes':\n          if(key  && typeof response[key] === 'object') {\n              for (var property in response[key]){\n                me.applyVariableValue(property,response[key][property],key);\n              }\n          }\n          break;\n          case 'botMessage':\n          if(key  && typeof response[key] === 'object') {\n              for (var property in response[key]){\n                me.applyVariableValue(property,response[key][property],key);\n              }\n          }\n          break;\n          case 'userMessage':\n          if(key  && typeof response[key] === 'object') {\n              for (var property in response[key]){\n                me.applyVariableValue(property,response[key][property],key);\n              }\n          }\n          break;\n          case 'widgetHeader':\n          if(key  && typeof response[key] === 'object') {\n              for (var property in response[key]){\n                me.applyVariableValue(property,response[key][property],key);\n              }\n          }\n          break;\n          case 'widgetFooter':\n          if(key  && typeof response[key] === 'object') {\n              for (var property in response[key]){\n                me.applyVariableValue(property,response[key][property],key);\n              }\n          }\n          break;\n          case 'widgetBody':\n          if(key  && typeof response[key] === 'object') {\n              for (var property in response[key]){\n                  if(property === 'backgroundImage' && response[key] && response[key]['useBackgroundImage']){\n                      $(\".kore-chat-body\").css(\"background-image\", \"url(\" + response[key]['backgroundImage'] + \")\");\n                  } else {\n                    me.applyVariableValue(property,response[key][property],key);\n                  }\n              }\n          }\n          case 'buttons':\n              if(key  && typeof response[key] === 'object') {\n                  for (var property in response[key]){\n                    me.applyVariableValue(property,response[key][property],key);\n                  }\n              }\n          break;\n          case 'digitalViews':\n              var defaultTheme = 'defaultTheme-kore';\n              if(response && response[key] && response[key].panelTheme){\n                var digitalViewsThemeMapping:any = {\n                    'theme_one':\"defaultTheme-kore\",\n                    'theme_two':\"darkTheme-kore\",\n                    'theme_three':\"defaultTheme-kora\",\n                    'theme_four':\"darkTheme-kora\"\n                }\n                if(digitalViewsThemeMapping[response[key].panelTheme]){\n                  defaultTheme = digitalViewsThemeMapping[response[key].panelTheme];\n                  $('.kr-wiz-menu-chat').addClass(defaultTheme);\n                  $('.kr-wiz-menu-chat').removeClass('defaultTheme-kore');\n                  \n                }\n              }\n          default:\n          break;\n      }\n     }\n      $(\".kore-chat-window\").addClass('customBranding-theme');\n  }\n};\napplyVariableValue (key:any,value:any,type:any){\n  try{\n      var cssPrefix = \"--sdk-chat-custom-\";\n      var cssVariable = \"\";\n      cssVariable = cssPrefix + '-' + type +'-' +key;\n      //  console.log(cssVariable+\":\",value);\n      if(value === 'square'){\n          value = '12px 12px 2px 12px'\n      }else if(value === 'circle'){\n          value = '20px 20px 20px 20px'\n      }\n      if(cssVariable){\n          document.documentElement.style.setProperty(cssVariable, value);\n      }\n  } catch(e){\n      console.log(e);\n  }\n  \n}\n\n/**\n * [#]{@link chatWindow#sendMessage} Send message to bot including rendering \n * @param {String} messageText message text to send\n * @param {Object} [options] additional options\n * @param {Object} options.renderMsg override message to show in UI\n * @param {Object} [serverMessageObject] overrides the properties of message object before sending to websocket\n * @param {Object} serverMessageObject.customdata customdata to send bot\n * @param {Object} serverMessageObject.message.metaTags metaTags to send bot\n * @param {Object} serverMessageObject.message.nlMeta nlMeta to send bot\n * @param {Object} [clientMessageObject] overrides the properties of message object before sending to UI renderMessage method\n * @param {Object} clientMessageObject.createdOn customdata to send bot\n * @param {Object} clientMessageObject.message.clientMessageId metaTags to send bot\n * @param {Object} clientMessageObject.message.cInfo.body nlMeta to send bot\n * @param clientMessageObject.____ and more\n*/\nsendMessage (messageText:any,options:any, serverMessageObject:any,clientMessageObject:any) {\n  const me:any = this;\n  me.sendMessageToBot(messageText, options, serverMessageObject,clientMessageObject);\n};\n  \n}\n(chatWindow.prototype as any).$ = $;\n\nexport default chatWindow;\n","__webpack_require__.h = () => (\"bfcfb386f4317a9dc700\")"],"names":[],"sourceRoot":""}